specVersion: 0.0.2
description: Decentraland's Marketplace
repository: https://github.com/decentraland/decentraland
schema:
  file: ./schema.graphql
dataSources:
  # ---------------------------------------------------------
  # PARCELS -------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: LANDRegistry
  #   network: mainnet
  #   source:
  #     address: '0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d'
  #     abi: LANDRegistry
  #     startBlock: 4944642
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/parcel.ts
  #     entities:
  #       - ERC721
  #       - Parcel
  #       - Data
  #     abis:
  #       - name: LANDRegistry
  #         file: ./abis/LANDRegistry.json
  #     callHandlers:
  #       - function: initialize(bytes)
  #         handler: handleInitialize
  #     eventHandlers:
  #       - event: Update(indexed uint256,indexed address,indexed address,string)
  #         handler: handleUpdate

  # ---------------------------------------------------------
  # ESTATES -------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: EstateRegistry
  #   network: mainnet
  #   source:
  #     address: '0x959e104e1a4db6317fa58f8295f586e1a978c297'
  #     abi: EstateRegistry
  #     startBlock: 6236547
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/estate.ts
  #     entities:
  #       - Estate
  #       - Parcel
  #       - Data
  #     abis:
  #       - name: EstateRegistry
  #         file: ./abis/EstateRegistry.json
  #       - name: LANDRegistry
  #         file: ./abis/LANDRegistry.json
  #     eventHandlers:
  #       - event: CreateEstate(indexed address,indexed uint256,string)
  #         handler: handleCreateEstate
  #       - event: AddLand(indexed uint256,indexed uint256)
  #         handler: handleAddLand
  #       - event: RemoveLand(indexed uint256,indexed uint256,indexed address)
  #         handler: handleRemoveLand
  #       - event: Update(indexed uint256,indexed address,indexed address,string)
  #         handler: handleUpdate

  # ---------------------------------------------------------
  # MANA ----------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: MANAToken
  #   network: mainnet
  #   source:
  #     address: '0x0f5d2fb29fb7d3cfee444a200298f468908cc942'
  #     abi: MANAToken
  #     startBlock: 4162050
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/manaToken.ts
  #     entities:
  #       - Wallet
  #     abis:
  #       - name: MANAToken
  #         file: ./abis/MANAToken.json
  #     eventHandlers:
  #       - event: Mint(indexed address,uint256)
  #         handler: handleMint
  #       - event: Burn(indexed address,uint256)
  #         handler: handleBurn
  #       - event: Transfer(indexed address,indexed address,uint256)
  #         handler: handleTransfer

  # ---------------------------------------------------------
  # ORDERS --------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: Marketplace
  #   network: mainnet
  #   source:
  #     address: '0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539'
  #     abi: Marketplace
  #     startBlock: 6496012
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/marketplace.ts
  #     entities:
  #       - Order
  #       - NFT
  #     abis:
  #       - name: Marketplace
  #         file: ./abis/Marketplace.json
  #     eventHandlers:
  #       - event: OrderCreated(bytes32,indexed uint256,indexed address,address,uint256,uint256)
  #         handler: handleOrderCreated
  #       - event: OrderSuccessful(bytes32,indexed uint256,indexed address,address,uint256,indexed address)
  #         handler: handleOrderSuccessful
  #       - event: OrderCancelled(bytes32,indexed uint256,indexed address,address)
  #         handler: handleOrderCancelled

  # ---------------------------------------------------------
  # ENS -------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: DCLRegistrar
  #   network: mainnet
  #   source:
  #     address: '0x2a187453064356c898cae034eaed119e1663acb8'
  #     abi: DCLRegistrar
  #     startBlock: 9412979
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/ens.ts
  #     entities:
  #       - DCLRegistrar
  #     abis:
  #       - name: DCLRegistrar
  #         file: ./abis/DCLRegistrar.json
  #     eventHandlers:
  #       - event: NameRegistered(indexed address,indexed address,indexed bytes32,string,uint256)
  #         handler: handleNameRegistered

  # ---------------------------------------------------------
  # BIDS ----------------------------------------------------
  # ---------------------------------------------------------
  # - kind: ethereum/contract
  #   name: ERC721Bid
  #   network: mainnet
  #   source:
  #     address: '0xe479dfd9664c693b2e2992300930b00bfde08233'
  #     abi: ERC721Bid
  #     startBlock: 7270906
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.3
  #     language: wasm/assemblyscript
  #     file: ./src/handlers/bid.ts
  #     entities:
  #       - Bid
  #     abis:
  #       - name: ERC721Bid
  #         file: ./abis/ERC721Bid.json
  #     eventHandlers:
  #       - event: BidCreated(bytes32,indexed address,indexed uint256,indexed address,uint256,uint256,bytes)
  #         handler: handleBidCreated
  #       - event: BidAccepted(bytes32,indexed address,indexed uint256,address,indexed address,uint256,uint256)
  #         handler: handleBidAccepted
  #       - event: BidCancelled(bytes32,indexed address,indexed uint256,indexed address)
  #         handler: handleBidCancelled


  # ---------------------------------------------------------
  # SMTs ----------------------------------------------------
  # ---------------------------------------------------------
  - kind: ethereum/contract
    name: SMT
    network: mainnet
    source:
      address: '0xE82f293Ed202e12D1EbA5E334035eAb480A206aa'
      abi: SMT
      startBlock: 12000000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/handlers/smt.ts
      entities:
        - Boardingpass
      abis:
        - name: SMT
          file: ./abis/SMT.json
      # eventHandlers:
      #   - event: Transfer(indexed address,indexed address,indexed uint256)
      #     handler: handleTransfer
      eventHandlers:
        - event: RoleGranted(indexed bytes32,indexed address,indexed address)
          handler: handleRoleGranted




# ---------------------------------------------------------
# TEMPLATES -----------------------------------------------
# ---------------------------------------------------------
templates:
  - name: ERC721
    kind: ethereum/contract
    network: mainnet
    source:
      abi: ERC721
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/handlers/nft.ts
      entities:
        - NFT
        # - Parcel
        # - Estate
        # - Wearable
        # - ENS
        - Boardingpass
      abis:
        - name: ERC721
          file: ./abis/ERC721.json
        - name: LANDRegistry
          file: ./abis/LANDRegistry.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256,address,bytes,bytes)
          handler: handleTransfer
        - event: Transfer(indexed address,indexed address,indexed uint256,address,bytes)
          handler: handleTransfer
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
